"0","sens_ana <- function(data, Y, treat, covar, bm = NULL, kd = 1)"
"0","{"
"0","  p.forest <- probability_forest(X = data[, covar],"
"0","                                 Y = as.factor(data[, treat]), seed = 1234, num.trees = 4000)"
"0","  data$ps_sens <- p.forest$predictions[,2]"
"0","  data <- subset(data, ps_sens > 0.1 & ps_sens < 0.9)"
"0","  fml <- as.formula(paste(Y, ""~"", treat, ""+"", paste(covar, collapse = ""+"")))"
"0","  mod <- lm(fml, data = data)"
"0","  sens <- sensemakr(model = mod, treatment = treat, benchmark_covariates = bm, kd = kd, sensitivity.of = ""t-value"")"
"0","  plot(sens)"
"0","}"
